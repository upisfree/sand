// Generated by CoffeeScript 1.9.3
Net.event.connect = function(socket) {
  var id;
  id = getRandomString(16);
  socket.id = id;
  Net.clients[id] = socket;
  Log(id + ' has been connected.');
  Net.command.ping.send(socket);
  setInterval(function() {
    Net.command.ping.send(socket);
    clearInterval(socket.loop);
    return socket.loop = setInterval(function() {
      if (socket.isFirstSyncWas) {
        return Net.command.sync.diff(socket);
      }
    }, socket.ping);
  }, 5000);
  if (!socket.isFirstSyncWas) {
    Net.command.sync.full(socket);
  }
  return socket.loop = setInterval(function() {
    if (socket.isFirstSyncWas) {
      return Net.command.sync.diff(socket);
    }
  }, socket.ping);
};
