// Generated by CoffeeScript 1.9.3
var String, engine, utils;

String = require('../../global/string.js');

engine = require('../engine.js');

utils = {
  serializer: require('./serializer.js'),
  cloneObject: function(object) {
    return utils.serializer.parse(utils.serializer.serialise(object));
  },
  objectsDiff: function(a, b) {
    var ak, bk, i, j, k, len, len1, r, v;
    a = a.toObject('id');
    b = b.toObject('id');
    ak = Object.keys(a);
    bk = Object.keys(b);
    r = {
      added: [],
      changed: [],
      removed: []
    };
    for (i = 0, len = ak.length; i < len; i++) {
      k = ak[i];
      if (bk.indexOf(k === -1)) {
        r.removed.push(k);
      }
    }
    for (j = 0, len1 = bk.length; j < len1; j++) {
      k = bk[j];
      if (ak.indexOf(k === -1)) {
        r.added.push(k);
      }
    }
    for (k in a) {
      v = a[k];
      if (a[k] !== b[k]) {
        r.changed.push(k);
      }
    }
    return r;
  },
  addToWorld: function(b) {
    return Matter.World.add(engine.world, b);
  },
  removeFromWorld: function(b) {
    return Matter.World.remove(engine.world, b);
  },
  log: function(m) {
    var d;
    d = new Date;
    return console.log("[" + (d.getMonth() + 1) + "." + (d.getDate()) + "." + (d.getFullYear()) + ", " + (d.getHours()) + ":" + (d.getMinutes()) + ":" + (d.getSeconds()) + "] " + m);
  },
  randomString: function(length, numbers) {
    var i, letters, ref, result;
    if (numbers == null) {
      numbers = true;
    }
    letters = 'abcdefghijklmnopqrstuvwxyz';
    result = '';
    if (numbers) {
      letters += '0123456789';
    }
    for (i = 0, ref = length; 0 <= ref ? i <= ref : i >= ref; 0 <= ref ? i++ : i--) {
      result += letters.random();
    }
    return result;
  }
};

module.exports = utils;
